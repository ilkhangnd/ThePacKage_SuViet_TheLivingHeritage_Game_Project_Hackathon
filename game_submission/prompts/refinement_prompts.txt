- Hãy tập trung vào việc kiểm tra lỗi, cải thiện hiệu suất và tinh chỉnh trải nghiệm người dùng. Kiểm tra lại logic checkAnswer() và nextQuiz() để đảm bảo người chơi có thể trả lời lại các câu hỏi sau khi nhấn nextQuiz-btn nếu họ trả lời sai, nhưng chỉ được cộng điểm một lần cho mỗi câu đúng, đây là Kiểm tra lỗi logic Quiz quan trọng. Tinh chỉnh CSS trong @media (max-width: 768px) cho #game-screen để các thẻ thông tin và nhiệm vụ (.content-card) được hiển thị theo cột dọc và các thẻ điều hướng Era (.era-card) không bị tràn, cải thiện giao diện người dùng trên thiết bị di động. Đảm bảo rằng hàm generateAIResponse(userMessage) luôn trả về một phản hồi hữu ích, ngay cả khi câu hỏi của người dùng không khớp với bất kỳ từ khóa chuyên biệt nào, bằng cách sử dụng các phản hồi trong aiResponses.general để tối ưu hóa phản hồi của AI Chat. Cuối cùng, gỡ lỗi hàm updatePreserveButton() để đảm bảo rằng sau khi một Era được bảo vệ, nút chuyển sang 'Đã Bảo Vệ ✅' và preserveBtn.disabled luôn là true, ngay cả khi người chơi quay lại Era đó từ một Era khác, nhằm đảm bảo Tính nhất quán của Nút Bảo vệ Di sản.
- Viết mã để triển khai API AI và tăng cường độ phức tạp của trò chơi. Viết hàm JavaScript calculateDifficultyScore() để tính toán một Chỉ số Độ khó tổng thể cho Era dựa trên số câu Quiz/Puzzle và lưu trữ vào gameState, sử dụng chỉ số này để điều chỉnh điểm thưởng Quiz/Puzzle (nếu chỉ số cao thì điểm thưởng cao hơn). Mở rộng hàm getAIResponse(userMessage) để hỗ trợ lưu trữ Lịch sử Hội thoại (Conversation History) trong phiên chơi hiện tại, cho phép AI phản hồi ngữ cảnh của các câu hỏi trước. Viết lại logic kiểm tra Puzzle (checkPuzzle()) để không chỉ kiểm tra thứ tự mà còn áp dụng phạt điểm (score deduction) nhỏ (ví dụ: -5 điểm) nếu người chơi kiểm tra sai thứ tự (incorrect order). Lập trình logic để tắt/ẩn hoàn toàn các thẻ nhiệm vụ (Quiz và Puzzle) trên màn hình Era nếu Era đó đã được Bảo vệ (isPreserved), thay vì chỉ hiển thị thông báo "ĐÃ HOÀN THÀNH". Cuối cùng, tối ưu hóa hàm loadEra(eraId) để xáo trộn thứ tự các nhiệm vụ Puzzle (era.puzzles) mỗi lần Era được tải lại, tăng tính chơi lại.